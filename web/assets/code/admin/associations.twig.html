<html>
<head>
<title>admin_associations_index.html.twig</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #a9b7c6;}
.s5 { color: #a9b7c6;}
.s6 { color: #808080;}
.s7 { color: #e8bf6a;}
.s8 { color: #bababa;}
.s9 { color: #a5c261;}
.s10 { color: #a9b7c6;}
.s11 { color: #cc7832;}
.s12 { color: #6a8759;}
.s13 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
admin_associations_index.html.twig</font>
</center></td></tr></table>
<pre><span class="s0">{% </span><span class="s2">extends </span><span class="s3">'base.html.twig' </span><span class="s0">%}</span>

{% <span class="s2">block </span><span class="s5">header </span><span class="s0">%}</span>
    <span class="s6">{# ----------------- Menu dashboard ----------------- #}</span>
    <span class="s0">{% </span><span class="s2">include </span><span class="s3">'includes/menu_admin_dashboard.html.twig' </span><span class="s0">%}</span>
    <span class="s7">&lt;h5 </span><span class="s8">class</span><span class="s9">=&quot;title-page mb-4&quot;</span><span class="s7">&gt;</span><span class="s10">Administration des Associations</span><span class="s7">&lt;/h5&gt;</span>
<span class="s0">{% </span><span class="s2">endblock </span><span class="s0">%}</span>

{% <span class="s2">block </span><span class="s5">content </span><span class="s0">%}</span>
<span class="s7">&lt;main </span><span class="s8">id</span><span class="s9">=&quot;dashboard&quot;</span><span class="s7">&gt;</span>
    <span class="s0">{% </span><span class="s2">include </span><span class="s3">'includes/flash_load_ajax.html.twig' </span><span class="s0">%}</span>

    <span class="s6">{# ----------------- Modal Suppression association ----------------- #}</span>
    <span class="s7">&lt;div </span><span class="s8">id</span><span class="s9">=&quot;validate-modal&quot; </span><span class="s8">class</span><span class="s9">=&quot;d-none&quot; </span><span class="s8">tabindex</span><span class="s9">=&quot;-1&quot; </span><span class="s8">role</span><span class="s9">=&quot;dialog&quot; </span><span class="s8">aria-labelledby</span><span class="s9">=&quot;mySmallModalLabel&quot; </span><span class="s8">aria-hidden</span><span class="s9">=&quot;true&quot;</span><span class="s7">&gt;</span>
        &lt;div <span class="s8">class</span><span class="s9">=&quot;message-delete&quot;</span><span class="s7">&gt;</span>
            &lt;div&gt;<span class="s10">Etes vous sûr de vouloir supprimer l'association </span><span class="s7">&lt;b&gt;&lt;span </span><span class="s8">class</span><span class="s9">=&quot;name&quot;</span><span class="s7">&gt;&lt;/span&gt;&lt;/b&gt; </span><span class="s10">?</span><span class="s7">&lt;/div&gt;</span>
            &lt;div&gt;
                &lt;button <span class="s8">id</span><span class="s9">=&quot;validate&quot; </span><span class="s8">class</span><span class="s9">=&quot;btn btn-danger&quot;</span><span class="s7">&gt;</span><span class="s10">Valider</span><span class="s7">&lt;/button&gt;</span>
                &lt;button <span class="s8">id</span><span class="s9">=&quot;cancel&quot; </span><span class="s8">class</span><span class="s9">=&quot;btn btn-info&quot;</span><span class="s7">&gt;</span><span class="s10">Annuler</span><span class="s7">&lt;/button&gt;</span>
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    <span class="s6">{# ----------------- Administration associations ----------------- #}</span>
    <span class="s7">&lt;div </span><span class="s8">class</span><span class="s9">=&quot;container mb-5&quot;</span><span class="s7">&gt;</span>

        &lt;div <span class="s8">class</span><span class="s9">=&quot;filters input-group mb-3&quot;</span><span class="s7">&gt;</span>
            <span class="s6">{# ----------------- Menu déroulant des Catégories + Search bar ----------------- #}</span>
            {#    La méthode JS 'onchange=&quot;window.location.href' = this.value&quot; 
            permet de recharger la page en dès la sélection d'une l'option    #}
            <span class="s0">{% </span><span class="s2">set </span><span class="s5">getCategory </span><span class="s0">= </span><span class="s5">app</span><span class="s0">.</span><span class="s5">request</span><span class="s0">.</span><span class="s5">get</span><span class="s0">(</span><span class="s3">'getCategory'</span><span class="s0">) %}</span>
            <span class="s7">&lt;label </span><span class="s8">hidden for</span><span class="s9">=&quot;categories&quot;</span><span class="s7">&gt;</span><span class="s10">Catégories</span><span class="s7">&lt;/label&gt;</span>
            &lt;select <span class="s8">name</span><span class="s9">=&quot;categories&quot; </span><span class="s8">id</span><span class="s9">=&quot;categories&quot; </span><span class="s8">class</span><span class="s9">=&quot;custom-select&quot;</span>
                    <span class="s8">onchange</span><span class="s9">=&quot;</span><span class="s4">window.location.href = </span><span class="s11">this</span><span class="s10">.value</span><span class="s9">&quot;</span><span class="s7">&gt;</span>

                &lt;option <span class="s8">value</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">path</span><span class="s0">(</span><span class="s3">'admin_associations'</span><span class="s0">, {</span><span class="s5">getCategory</span><span class="s0">: </span><span class="s5">null</span><span class="s0">}) }}</span><span class="s9">&quot;</span><span class="s7">&gt;</span><span class="s10">Categories</span><span class="s7">&lt;/option&gt;</span>
                <span class="s0">{% </span><span class="s2">for </span><span class="s5">category </span><span class="s2">in </span><span class="s5">categories </span><span class="s0">%}</span>
                    <span class="s7">&lt;option</span>
                        <span class="s0">{{ (</span><span class="s5">category</span><span class="s0">.</span><span class="s5">id </span><span class="s2">in </span><span class="s5">getCategory</span><span class="s0">) ? </span><span class="s3">'selected' </span><span class="s0">}}</span>
                        <span class="s8">data-catg</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">category</span><span class="s0">.</span><span class="s5">id </span><span class="s0">}}</span><span class="s9">&quot;</span>
                        <span class="s8">value</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">path</span><span class="s0">(</span><span class="s3">'admin_associations'</span><span class="s0">, {</span><span class="s5">getCategory</span><span class="s0">: </span><span class="s5">category</span><span class="s0">.</span><span class="s5">id</span><span class="s0">}) }}</span><span class="s9">&quot;</span><span class="s7">&gt;</span><span class="s0">{{ </span><span class="s5">category</span><span class="s0">.</span><span class="s5">name </span><span class="s0">}}</span>
                    <span class="s7">&lt;/option&gt;</span>
                <span class="s0">{% </span><span class="s2">endfor </span><span class="s0">%}</span>
            <span class="s7">&lt;/select&gt;</span>

            <span class="s6">{# ----------------- Rechercher une association ----------------- #}</span>
            <span class="s7">&lt;i </span><span class="s8">id</span><span class="s9">=&quot;search-btn&quot; </span><span class="s8">class</span><span class="s9">=&quot;fas fa-search mr-3 ml-3&quot;</span><span class="s7">&gt;&lt;/i&gt;</span>
            &lt;label <span class="s8">hidden for</span><span class="s9">=&quot;search&quot;</span><span class="s7">&gt;</span><span class="s10">Recherche</span><span class="s7">&lt;/label&gt;</span>
            &lt;input <span class="s8">type</span><span class="s9">=&quot;text&quot; </span><span class="s8">id</span><span class="s9">=&quot;search&quot; </span><span class="s8">data-search-url</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">path</span><span class="s0">(</span><span class="s3">'admin_ajax_search'</span><span class="s0">) }}</span><span class="s9">&quot; </span><span class="s8">placeholder</span><span class="s9">=&quot;rechercher&quot;</span><span class="s7">&gt;</span>

            <span class="s6">{# ----------------- Ajouter une association ----------------- #}</span>
            <span class="s7">&lt;div </span><span class="s8">class</span><span class="s9">=&quot;ml-3&quot;</span><span class="s7">&gt;</span>
                &lt;a <span class="s8">href</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">path</span><span class="s0">(</span><span class="s3">'admin_associations_create'</span><span class="s0">) }}</span><span class="s9">&quot; </span><span class="s8">class</span><span class="s9">=&quot;btn btn-info btn-sm pl-2 pr-2&quot;</span><span class="s7">&gt;</span>
                    <span class="s10">Ajouter une association </span><span class="s7">&lt;i </span><span class="s8">class</span><span class="s9">=&quot;fas fa-plus-circle&quot;</span><span class="s7">&gt;&lt;/i&gt;</span>
                &lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        <span class="s6">{# ----------------- Historique des Dons aux associations ----------------- #}</span>
        <span class="s7">&lt;div </span><span class="s8">class</span><span class="s9">=&quot;associations associations-dash&quot;</span><span class="s7">&gt;</span>
            <span class="s0">{% </span><span class="s2">for </span><span class="s5">association </span><span class="s2">in </span><span class="s5">associations </span><span class="s0">%}</span>
                <span class="s7">&lt;div </span><span class="s8">class</span><span class="s9">=&quot;asso-asso&quot;</span><span class="s7">&gt;</span>

                    &lt;div <span class="s8">class</span><span class="s9">=&quot;image-asso box&quot;</span><span class="s7">&gt;</span>
                        &lt;a <span class="s8">href</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">path</span><span class="s0">(</span><span class="s3">'association_id'</span><span class="s0">, {</span><span class="s5">id</span><span class="s0">: </span><span class="s5">association</span><span class="s0">.</span><span class="s5">id</span><span class="s0">}) }}</span><span class="s9">&quot; </span><span class="s8">class</span><span class="s9">=&quot;link-asso&quot;</span><span class="s7">&gt;</span>
                            <span class="s0">{% </span><span class="s2">if </span><span class="s5">association</span><span class="s0">.</span><span class="s5">image </span><span class="s2">is </span><span class="s5">null </span><span class="s0">%}</span>
                                <span class="s7">&lt;img </span><span class="s8">src</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">asset</span><span class="s0">(</span><span class="s5">ImgAssosDefault</span><span class="s0">) }}</span><span class="s9">&quot; </span><span class="s8">alt</span><span class="s9">=&quot;image par défaut&quot;</span><span class="s7">&gt;</span>
                            <span class="s0">{% </span><span class="s2">else </span><span class="s0">%}</span>
                                <span class="s7">&lt;img </span><span class="s8">src</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">asset</span><span class="s0">(</span><span class="s5">ImgAssosFolder </span><span class="s0">~ </span><span class="s5">association</span><span class="s0">.</span><span class="s5">image</span><span class="s0">) }}</span><span class="s9">&quot; </span><span class="s8">alt</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">association</span><span class="s0">.</span><span class="s5">name </span><span class="s0">}}</span><span class="s9">&quot;</span><span class="s7">&gt;</span>
                            <span class="s0">{% </span><span class="s2">endif </span><span class="s0">%}</span>
                        <span class="s7">&lt;/a&gt;</span>
                    &lt;/div&gt;

                    &lt;div <span class="s8">class</span><span class="s9">=&quot;text-asso box&quot;</span><span class="s7">&gt;</span>
                        &lt;a <span class="s8">href</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">path</span><span class="s0">(</span><span class="s3">'association_id'</span><span class="s0">, {</span><span class="s5">id</span><span class="s0">: </span><span class="s5">association</span><span class="s0">.</span><span class="s5">id</span><span class="s0">}) }}</span><span class="s9">&quot; </span><span class="s8">class</span><span class="s9">=&quot;link-asso&quot;</span><span class="s7">&gt;</span>
                            &lt;h3&gt;<span class="s0">{{ </span><span class="s5">association</span><span class="s0">.</span><span class="s5">name </span><span class="s0">}}</span><span class="s7">&lt;/h3&gt;</span>
                        &lt;/a&gt;
                        &lt;p&gt;<span class="s10">Inscription le </span><span class="s0">{{ </span><span class="s5">association</span><span class="s0">.</span><span class="s5">createdAt </span><span class="s0">| </span><span class="s5">date</span><span class="s0">(</span><span class="s3">&quot;d/m/y&quot;</span><span class="s0">) }} </span><span class="s10">à </span><span class="s0">{{ </span><span class="s5">association</span><span class="s0">.</span><span class="s5">createdAt </span><span class="s0">| </span><span class="s5">date</span><span class="s0">(</span><span class="s3">&quot;H:i:s&quot;</span><span class="s0">) }}</span><span class="s7">&lt;/p&gt;</span>
                        &lt;p&gt;<span class="s10">Contact: </span><span class="s0">{{ </span><span class="s5">association</span><span class="s0">.</span><span class="s5">contactInfo </span><span class="s0">}}</span><span class="s7">&lt;/p&gt;</span>
                    &lt;/div&gt;

                    <span class="s6">{# ----------------- stats pour cette association ----------------- #}</span>
                    <span class="s7">&lt;div </span><span class="s8">class</span><span class="s9">=&quot;stat-asso box&quot;</span><span class="s7">&gt;</span>
                        <span class="s10">Total des dons: </span><span class="s7">&lt;b&gt;</span><span class="s0">{{ </span><span class="s5">association</span><span class="s0">.</span><span class="s5">totalGiven </span><span class="s0">}}</span><span class="s10">€</span><span class="s7">&lt;/b&gt;</span>
                    &lt;/div&gt;

                    &lt;div <span class="s8">class</span><span class="s9">=&quot;form-don box&quot;</span><span class="s7">&gt;</span>
                        <span class="s6">{# Editer une association #}</span>
                        <span class="s7">&lt;a </span><span class="s8">href</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">path</span><span class="s0">(</span><span class="s3">'admin_associations_edit'</span><span class="s0">, {</span><span class="s5">id</span><span class="s0">: </span><span class="s5">association</span><span class="s0">.</span><span class="s5">id </span><span class="s0">}) }}</span><span class="s9">&quot;</span>
                           <span class="s8">class</span><span class="s9">=&quot;edit btn btn-info btn-sm m-1&quot;</span><span class="s7">&gt;</span>
                            &lt;i <span class="s8">class</span><span class="s9">=&quot;far fa-edit&quot;</span><span class="s7">&gt;&lt;/i&gt;</span>
                        &lt;/a&gt;

                        <span class="s6">{# Supprimer une categorie #}</span>
                        <span class="s7">&lt;a </span><span class="s8">href</span><span class="s9">=&quot;&quot; </span><span class="s8">class</span><span class="s9">=&quot;delete btn btn-danger btn-sm m-1&quot;</span>
                            <span class="s8">data-delete-name</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">association</span><span class="s0">.</span><span class="s5">name </span><span class="s0">}}</span><span class="s9">&quot;</span>
                            <span class="s8">data-delete-path</span><span class="s9">=&quot;</span><span class="s0">{{ </span><span class="s5">path</span><span class="s0">(</span><span class="s3">'admin_associations_delete'</span><span class="s0">, {</span><span class="s5">id</span><span class="s0">: </span><span class="s5">association</span><span class="s0">.</span><span class="s5">id</span><span class="s0">}) }}</span><span class="s9">&quot;</span><span class="s7">&gt;</span>
                            &lt;i <span class="s8">class</span><span class="s9">=&quot;fas fa-trash-alt&quot;</span><span class="s7">&gt;&lt;/i&gt;</span>
                        &lt;/a&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            <span class="s0">{% </span><span class="s2">else </span><span class="s0">%}</span>
                <span class="s7">&lt;div </span><span class="s8">class</span><span class="s9">=&quot;no-infos&quot;</span><span class="s7">&gt;</span>
                    &lt;span&gt;<span class="s10">Aucune association trouvée.</span><span class="s7">&lt;/span&gt;</span>
                &lt;/div&gt;
            <span class="s0">{% </span><span class="s2">endfor </span><span class="s0">%}</span>
        <span class="s7">&lt;/div&gt;</span>
    &lt;/div&gt;
&lt;/main&gt;
<span class="s0">{% </span><span class="s2">endblock </span><span class="s0">%}</span>

{% <span class="s2">block </span><span class="s5">scripts </span><span class="s0">%}</span>
    {% <span class="s2">include </span><span class="s3">'includes/js_path_delete.html.twig' </span><span class="s0">%}</span>
    {% <span class="s2">include </span><span class="s3">'includes/js_ajax_search.html.twig' </span><span class="s0">%}</span>

    <span class="s7">&lt;script&gt;</span>
        <span class="s4">$(document).ready(</span><span class="s11">function</span><span class="s10">(){</span>

            <span class="s11">var </span><span class="s4">page = $(</span><span class="s12">'main'</span><span class="s10">).html()</span><span class="s11">;</span>
            var <span class="s4">down = </span><span class="s11">false;</span>

            <span class="s4">$(document).keydown(</span><span class="s11">function </span><span class="s10">(e) {</span>

                <span class="s11">var </span><span class="s4">controller = window.location.origin + </span><span class="s12">'/assets/code' </span><span class="s10">+ window.location.pathname + </span><span class="s12">'.php.html'</span><span class="s11">;</span>
                <span class="s4">controller = controller.replace(</span><span class="s12">'/app_dev.php'</span><span class="s11">, </span><span class="s12">''</span><span class="s10">)</span><span class="s11">;</span>
                var <span class="s4">controller = window.location.origin + </span><span class="s12">'/assets/code' </span><span class="s10">+ window.location.pathname + </span><span class="s12">'.php.html'</span><span class="s11">;</span>
                <span class="s4">controller = controller.replace(</span><span class="s12">'/app_dev.php'</span><span class="s11">, </span><span class="s12">''</span><span class="s10">)</span><span class="s11">;</span>

                if<span class="s10">(e.which == </span><span class="s13">67 </span><span class="s10">&amp;&amp; down == </span><span class="s11">false</span><span class="s10">)</span>
                {
                    down = <span class="s11">true;</span>
                    <span class="s4">$(</span><span class="s12">'main'</span><span class="s10">).html(</span><span class="s12">'&lt;object width=&quot;100%&quot; height=&quot;500&quot; data=&quot;'</span><span class="s10">+ controller + </span><span class="s12">'&quot;&gt;'</span><span class="s10">)</span><span class="s11">;</span>
                <span class="s10">} </span><span class="s11">else </span><span class="s10">{</span>
                    down = <span class="s11">false;</span>
                    <span class="s4">$(</span><span class="s12">'main'</span><span class="s10">).html(page)</span><span class="s11">;</span>
                <span class="s10">}</span>
            })

        })
    <span class="s7">&lt;/script&gt;</span>

<span class="s0">{% </span><span class="s2">endblock </span><span class="s0">%}</span>
</pre>
</body>
</html>