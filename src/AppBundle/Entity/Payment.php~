<?php

namespace AppBundle\Entity;

use AppBundle\Entity\Traits\CreatedAtTrait;
use Doctrine\ORM\Mapping as ORM;

/**
 * payment
 *
 * @ORM\Table(name="payment")
 * @ORM\Entity(repositoryClass="AppBundle\Repository\PaymentRepository")
 */
class Payment
{
    use CreatedAtTrait;

    // Constantes des status de paiement des dons
    const PAY_BASKET = 0;
    const PAY_ERROR = 1;
    const PAY_REFUSED = 2;
    const PAY_CANCEL = 3;
    // Constantes des status de paiement des dons et de paiement aux assos
    const PAY_IN_TRANSFER = 4;
    const PAY_PROCESSED = 5;
    const PAYEMENT_STATUS = [
        self::PAY_BASKET => 'Panier',
        self::PAY_ERROR => 'Erreur de paiement',
        self::PAY_REFUSED => 'Paiement refusé',
        self::PAY_CANCEL => 'Paiement annulé',
        self::PAY_IN_TRANSFER => 'En attente de transfert',
        self::PAY_PROCESSED => 'Transfert effectué'
    ];

    // Constantes des modes de paiment des dons et des transferts aux associations
    const PAY_STRIPE = 0;
    const PAY_PAYPAL = 1;
    const PAY_CARD = 2;
    const PAY_WIRETRANS = 3;
    const PAY_CHECK = 4;
    const PAYEMENT_MODE = [
        self::PAY_STRIPE => 'Stripe',
        self::PAY_PAYPAL => 'PayPal',
        self::PAY_CARD => 'Credit Card',
        self::PAY_WIRETRANS => 'Virement',
        self::PAY_CHECK => 'Chèque'
    ];

    /**
     * @var int
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var int
     *
     * @ORM\Column(name="payment_status", type="integer")
     */
    private $paymentStatus;

    /**
     * @var int
     *
     * @ORM\Column(name="payment_mode", type="integer")
     */
    private $paymentMode;

    /**
     * @var Assos
     *
     * @ORM\ManyToOne(targetEntity="AppBundle\Entity\Assos", inversedBy="payments")
     */
    private $association;

    /**
     * @var Donation
     *
     * @ORM\OneToMany(targetEntity="AppBundle\Entity\Donation", mappedBy="payment")
     */
    private $donations;


    public function __construct()
    {
        $this->createdAt = new \DateTime();
    }

}

