{% extends 'base.html.twig' %}

{% block header %}
    {# ----------------- Menu dashboard ----------------- #}
    {% include 'includes/menu_admin_dashboard.html.twig' %}
    <h5 class="title-page mb-4">Administration des catégories</h5>
{% endblock %}

{% block content %}
<main id="dashboard">
    {% include 'includes/flash_load_ajax.html.twig' %}

    {# ----------------- Modal Suppression categories ----------------- #}
    <div id="validate-modal" class="d-none" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
        <div class="message-delete">
            <div>Etes vous sûr de vouloir supprimer la catégorie <b><span class="name"></span></b> ?</div>
            <div>
                <button id="validate" class="btn btn-danger btn-sm">Valider</button>
                <button id="cancel" class="btn btn-info btn-sm">Annuler</button>
            </div>
        </div>
    </div>

    <div class="container">

        {# ----------------- Ajouter une Categories ----------------- #}
        {{ form_start(form) }}
            {{ form_errors(form) }}
            <div class="form-catg mb-4">
                {{ form_widget(form.name) }}
                <button type="submit" class="btn btn-warning ml-3">Ajouter</button>
            </div>
        {{ form_end(form) }}

        {# ----------------- Categories ----------------- #}
        <div class="categories">
            {% for category in categories %}
                <div class="catg-box">
                    <div class="name-catg">{{ category.name }}</div>

                    <div class="btn-catg">
                        {# Editer une categorie #}
                        <a href="{{ path('admin_categories_update', {id: category.id}) }}" class="edit btn btn-info btn-sm">
                            <i class="far fa-edit"></i>
                        </a>
                        {# Supprimer une categorie #}
                        <a href="" class="delete btn btn-danger btn-sm"
                           data-delete-id="{{ category.id }}" data-delete-name="{{ category.name }}"
                           data-delete-path="{{ path('admin_ajax_categories_delete') }}">
                            <i class="fas fa-trash-alt"></i>
                        </a>
                    </div>
                </div>
            {% else %}
                <div class="no-infos">
                    <span>Aucune catégorie trouvée.</span>
                </div>
            {% endfor %}
        </div>
    </div>
</main>
{% endblock %}

{% block scripts %}
    {% include 'includes/js_ajax_delete.html.twig' %}
{% endblock %}
